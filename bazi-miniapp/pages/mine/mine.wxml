<!-- pages/mine/mine.wxml -->
<view class="container">

  <!-- 用户信息卡片 -->
  <view class="user-card">
    <view class="user-info" wx:if="{{hasUserInfo}}">
      <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <view class="user-details">
        <text class="nickname">{{userInfo.nickName}}</text>
        <text class="welcome">欢迎使用八字排盘</text>
      </view>
    </view>

    <view class="user-info guest" wx:else>
      <view class="avatar-placeholder">
        <text class="avatar-icon">👤</text>
      </view>
      <view class="user-details">
        <text class="nickname">未登录</text>
        <text class="welcome">登录后查看更多功能</text>
      </view>
    </view>

    <button class="login-btn" wx:if="{{!hasUserInfo && canIUseGetUserProfile}}" bindtap="getUserProfile">
      <text class="btn-text">登录</text>
    </button>
  </view>

  <!-- 统计信息卡片 -->
  <view class="stats-card card">
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-value">{{stats.totalRecords}}</text>
        <text class="stat-label">总查询次数</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{stats.todayRecords}}</text>
        <text class="stat-label">今日查询</text>
      </view>
    </view>
  </view>

  <!-- 快捷操作 -->
  <view class="quick-actions card">
    <view class="card-header">
      <text class="card-title">快捷操作</text>
    </view>
    <view class="action-grid">
      <view class="action-item" bindtap="onStartBazi">
        <view class="action-icon">🎯</view>
        <text class="action-text">开始排盘</text>
      </view>
      <view class="action-item" bindtap="onViewHistory">
        <view class="action-icon">📜</view>
        <text class="action-text">历史记录</text>
      </view>
    </view>
  </view>

  <!-- 设置列表 -->
  <view class="settings-card card">
    <view class="card-header">
      <text class="card-title">设置</text>
    </view>
    <view class="settings-list">
      <view
        class="setting-item"
        wx:for="{{settings}}"
        wx:key="title"
        data-action="{{item.action}}"
        bindtap="onSettingTap"
      >
        <view class="setting-left">
          <text class="setting-icon">{{item.icon}}</text>
          <view class="setting-info">
            <text class="setting-title">{{item.title}}</text>
            <text class="setting-desc">{{item.desc}}</text>
          </view>
        </view>
        <text class="setting-arrow">›</text>
      </view>
    </view>
  </view>

  <!-- 版权信息 -->
  <view class="copyright">
    <text class="copyright-text">八字排盘 v1.0.0</text>
    <text class="copyright-text">仅供参考，请理性对待</text>
  </view>

</view>
